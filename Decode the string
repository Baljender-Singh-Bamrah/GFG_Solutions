class Solution {
  public:
    string decodedString(string &s) {
        // code here
        stack<string> st, k;
        string ans = "", num = "";
        for(auto &it: s) {
            if(isdigit(it)) {
                num+= it;
            } else if(it=='[') {
                k.push(num);
                st.push(ans);
                ans = "";
                num = "";
            } else if(it==']') {
                int cnt = stoi(k.top());
                k.pop();
                string str = st.top();
                st.pop();
                while(cnt--) {
                    str+=ans;
                }
                
                ans = str;
            } else {
                ans+=it;
            }
        }
        return ans;
    }
};
